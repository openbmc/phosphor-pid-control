{
  "comments": [
    {
      "key": {
        "uuid": "a92a90c3_fbdc359d",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-10-15T06:15:28Z",
      "side": 1,
      "message": "It should not be necessary to call updateValue(NaN) here, because the test for _available being false will result in going into failsafe mode anyway. For debugging purposes it can be advantageous to retain the last-known-good value.",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3c2700a_c628fe53",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1001234
      },
      "writtenOn": "2021-10-20T11:11:43Z",
      "side": 1,
      "message": "I think there might be some misunderstanding here. The intention is to have an \u0027Unavailable\u0027 sensor not put the PID system into failsafe mode. And keep the system continuing its normal work path.\nGiven that, if we don\u0027t clear its cached \u0027Value\u0027 here, a high \u0027Value\u0027 (beyond \u0027Setpoint\u0027) may slip to the latter PID calculation and makes the PID output go up cycle by cycle until reaching the max cap. So, I think we would need to clear its \u0027Value\u0027 here.\nIs this make sense to you?",
      "parentUuid": "a92a90c3_fbdc359d",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "675bdf73_60c532c8",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1001234
      },
      "writtenOn": "2021-10-26T08:14:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f3c2700a_c628fe53",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b175e5e4_41703a43",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-10-27T04:24:32Z",
      "side": 1,
      "message": "Ah. So an unavailable sensor should have its value intentionally cleared, so that it does not participate in the PID loop calculations? That makes more sense. It would be good to add a comment that explains this reasoning.",
      "parentUuid": "675bdf73_60c532c8",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcb3ff22_e2bfff5f",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 2
      },
      "lineNbr": 292,
      "author": {
        "id": 1001234
      },
      "writtenOn": "2021-11-10T09:01:55Z",
      "side": 1,
      "message": "Updated.",
      "parentUuid": "b175e5e4_41703a43",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b91df7e_b8c66a1e",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 386,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-10-15T06:15:28Z",
      "side": 1,
      "message": "This is a great explanation. Could this test be moved into the DbusPassive::getFailed() function? That seems like a better place, because that\u0027s where the other flags that can contribute to failure (such as _badReading and _marginHot) are tested.",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e249412_3238912e",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 386,
      "author": {
        "id": 1001234
      },
      "writtenOn": "2021-10-20T11:11:43Z",
      "side": 1,
      "message": "Thanks. :) \nAnd I was struggling with this. I finally put it this way because I thought \u0027Available\u0027 and \u0027Failed\u0027 were two parallel concepts. \u0027Available\u0027 is not included in \u0027Failed\u0027. A sensor should be physically available at first, and then we start to consider if it is in a \u0027Failed\u0027 state. Would this make sense to you?",
      "parentUuid": "4b91df7e_b8c66a1e",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a82e3a7_2eb7b965",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 386,
      "author": {
        "id": 1001234
      },
      "writtenOn": "2021-10-26T08:14:51Z",
      "side": 1,
      "message": "Done. Not so sure if I should mark it as Resolved to trigger a next review process?",
      "parentUuid": "2e249412_3238912e",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a405f607_3789b058",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 386,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-10-27T04:24:32Z",
      "side": 1,
      "message": "Available and Failed are two different concepts, you are correct. If a sensor is not available, then we don\u0027t know if that sensor has failed or not.\n\nHowever, for purposes of this code, we assume that an unavailable sensor has not failed. it makes the most sense to me, to put the test into getFailed(). If the sensor is unavailable, return false from getFailed.\n\nIt also simplifies the logic here. The if-statement here is already rather tricky, and I\u0027d prefer not to make it more complex.",
      "parentUuid": "8a82e3a7_2eb7b965",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4a2153fc_ecdd3b93",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 386,
      "author": {
        "id": 1001234
      },
      "writtenOn": "2021-11-10T09:01:55Z",
      "side": 1,
      "message": "Updated.",
      "parentUuid": "a405f607_3789b058",
      "revId": "34128e1a9940c7cce214fd56760895f872c91ff2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}