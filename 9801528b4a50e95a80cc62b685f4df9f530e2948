{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "384f4112_59713597",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2025-06-05T22:27:38Z",
      "side": 1,
      "message": "This is a really good cleanup! Breaking `getService()` and `getProperties()` into two separate try blocks is important for stability and avoiding UB here, as you discovered.",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e8b2e38_dda39794",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-06-09T03:56:49Z",
      "side": 1,
      "message": "Hi, thanks for pointing out the flaws in my previous patch. I was also concerned about the `unavailableAsFailed` flag\u0027s role in the whole context.\n\nCan you also help to refactor this comment section a bit to suit the new behaviors? Especially the sentence mentioning `unavailableAsFailed` so it won\u0027t cause any confusion in the future for whoever reading the code.",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20ca3072_c7782d12",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1002134
      },
      "writtenOn": "2025-06-10T10:49:48Z",
      "side": 1,
      "message": "I will update the comment with more details later.\nThank you for your suggestion.",
      "parentUuid": "2e8b2e38_dda39794",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5dfdbf9c_fd425847",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1002134
      },
      "writtenOn": "2025-06-11T07:07:30Z",
      "side": 1,
      "message": "I have updated the comment as discussed.\nI believe this commit touches on two main aspects:\n\n- unavailableAsFailed now applies only when the sensor object exists on D-Bus but is unavailable.\n- handle-missing-object-paths should only manage scenarios where the sensor\u0027s object does not exist on D-Bus, and should not consider cases where the sensor\u0027s object exists but getProperties fails.\n\nIf you think it would be clearer to review these changes separately, I can also split them into two commits for separate review.",
      "parentUuid": "20ca3072_c7782d12",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebdb310d_2bbe79df",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-06-11T08:20:37Z",
      "side": 1,
      "message": "Thank you a lot for addressing my comment carefully. My intent was to update the comment lines at lines 98-99, where it mentions that\n\n\u003e both cases will have getFailed()\u003dtrue at the beginning as long as _unavailableAsFailed\u003dtrue...\n\nIt contradicts with your change, and is the most visible thing exposed to readers, which can easily cause confusion. However, the commit message is great now.",
      "parentUuid": "5dfdbf9c_fd425847",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7679e9c6_bc180233",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 128,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-06-09T03:56:49Z",
      "side": 1,
      "message": "I just want to clarify how you plan to treat the failure here. Is it that if getProperties fails, the control loop will be continuously restarted until it passes the condition because of this [catch](https://github.com/openbmc/phosphor-pid-control/blob/52e3c8e36ed9410ad506a0fa3560b3fa62c6d660/main.cpp#L209), regardless of the setting of info-\u003eunavailableAsFailed, right?",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9ed9bc6_7bcc03df",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 128,
      "author": {
        "id": 1002134
      },
      "writtenOn": "2025-06-10T10:49:48Z",
      "side": 1,
      "message": "Yes, if `getService` succeeds but `getProperties` fails, the control loop will continuously restart, just like the behavior when `handle-missing-object-paths` is not enabled.\nThis is because I believe `handle-missing-object-paths` should only manage scenarios where the sensor\u0027s object does not exist on D-Bus, and not consider cases where the sensor\u0027s object exists but `getProperties` fails.\nThis approach keeps the option focused on a single, simpler function.",
      "parentUuid": "7679e9c6_bc180233",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc60d27d_40a9f6c5",
        "filename": "dbus/dbuspassive.cpp",
        "patchSetId": 5
      },
      "lineNbr": 128,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-06-11T08:20:37Z",
      "side": 1,
      "message": "Got it. I agree with your opinion. Thanks.",
      "parentUuid": "e9ed9bc6_7bcc03df",
      "revId": "9801528b4a50e95a80cc62b685f4df9f530e2948",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}