{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5e9d28f7_02474c20",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T01:46:03Z",
      "side": 1,
      "message": "Overall, this looks good. I just have some nitpick concerns about error handling and edge cases.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "761c9b3e_829dacdf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T02:00:10Z",
      "side": 1,
      "message": "The CI (Jenkins) is not running because the owner of this change is not in the allowlist. I am not sure how to do this, it\u0027s not something I have access to. Please ask on the Discord.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88b1bb1a_dadc5a39",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T01:46:03Z",
      "side": 1,
      "message": "It might be possible to re-use an existing function here:\n\nhttps://github.com/openbmc/phosphor-pid-control/blob/8c051121ade815a46e39d5c669fee77302df2b6d/dbus/dbusconfiguration.cpp#L77\n\nI would prefer to have only one D-Bus escaping function in the program, since only one should be needed. We should probably clean up `sensorNameToDbusName()` and use that, instead of adding another function to serve the same purpose.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6a56798_e6c78f6e",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-11T01:57:20Z",
      "side": 1,
      "message": "will study it",
      "parentUuid": "88b1bb1a_dadc5a39",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1896750f_bf93aaba",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-16T00:36:35Z",
      "side": 1,
      "message": "hello Josh:\nare you saying we got to make sensorNameToDbusName() avaliable for other functions to use ? because the sensorNameToDbusName() is declared as a incline function so it can only be used in dbusconfiguration.cpp",
      "parentUuid": "b6a56798_e6c78f6e",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "649b38b1_30308d10",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-16T01:32:38Z",
      "side": 1,
      "message": "hello Josh:\nquick update here , we found the way to convert pidname to match dbusname rule \nwithout modifying sensorNameToDbusName() declaration\nwe do the conversion somewhere else , will update the patch later on",
      "parentUuid": "1896750f_bf93aaba",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35fdc8cc_57a5dfaa",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-25T00:22:32Z",
      "side": 1,
      "message": "OK, let me know where the conversion takes place at. The `pidname` still needs to be validated as a D-Bus object name before being used directly, otherwise it will crash when used.",
      "parentUuid": "649b38b1_30308d10",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8891910_27ecf4ba",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1001708
      },
      "writtenOn": "2023-05-25T04:19:36Z",
      "side": 1,
      "message": "We perform the conversion during the dbus config and utilize the sensorNameToDbusName() function you recommended. This helps us avoid crashes during usage.\nIn dbus/dbusconfiguration.cpp\nconst std::string pidName \u003d sensorNameToDbusName(std::get\u003cstd::string\u003e(base.at(\"Name\")));",
      "parentUuid": "35fdc8cc_57a5dfaa",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a935995_209db390",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T01:46:03Z",
      "side": 1,
      "message": "What happens if `pidname` is an empty string? This can happen, because PID loops do not necessarily have to have names (see my later comment). It is an error for an D-Bus object path component to be empty. If an empty string is passed in, we should fall back to `\"_\"`.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9914681_dfcec764",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-16T03:05:07Z",
      "side": 1,
      "message": "we dont need to worry about pidname is an empty string case\n\ncase1 : dbus-configuration method (entity manager)\nthis empty string will cause entity manager fail to run , so the user will fix this mis-configuration naturally\n\ncase2: config.json (static way)\npid service will fail during building json stage\n\n generally speaking, the empty pidname string will not be able passed on to \n buildzone stage",
      "parentUuid": "7a935995_209db390",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "462b5d39_7b7c7f4a",
        "filename": "pid/builder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-25T00:22:32Z",
      "side": 1,
      "message": "Understood, good analysis.",
      "parentUuid": "a9914681_dfcec764",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b893f56f_e215c9a4",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T01:46:03Z",
      "side": 1,
      "message": "Please also clear the _maximumSetPointName string here, so that it will properly show up as an empty string, instead of incorrectly holding over the previous contents. Because of the disable feature, we are going to see the case of an empty _SetPoints vector much more often in practice now. So, it is important that we have correct default behavior in this situation.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19562da9_ac1d6444",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-11T01:57:20Z",
      "side": 1,
      "message": "hello josh:\nI was thinking of reset _maximumSetPointName here before , at that time\nbecause it follow the same logic as reset _maximumSetPoint\nhowever \njust found  _maximumSetPointName will be cleared out in if (minThermalThreshold \u003e\u003d _maximumSetPoint) condition , \n\nwe will reset the string here because you suggested to change to Minimum\nin #272",
      "parentUuid": "b893f56f_e215c9a4",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "925cefb2_6f35248f",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-25T00:22:32Z",
      "side": 1,
      "message": "That is correct. Thanks.",
      "parentUuid": "19562da9_ac1d6444",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "846a2e3b_6242016a",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 272,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T01:46:03Z",
      "side": 1,
      "message": "This will also happen much more frequently now, with the disable feature we are adding. I request this string be changed from `\"\"` to `\"Minimum\"`, to more correctly identify the source of the setpoint when this happens. This will also align with the behavior of `\"Ceiling\"` above.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8609b024_90209503",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 272,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-11T01:57:20Z",
      "side": 1,
      "message": "get you point",
      "parentUuid": "846a2e3b_6242016a",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d09b4cd_2488e85e",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 272,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-25T00:22:32Z",
      "side": 1,
      "message": "Thanks",
      "parentUuid": "8609b024_90209503",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8eb7bddb_a2d5f417",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 471,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-11T01:46:03Z",
      "side": 1,
      "message": "What happens if `name` already exists in the map? We should print a warning message when this happens. This will help users detect this configuration mistake.\n\nAlso, we should also print a warning message if `name` is an empty string. I think, but I am not sure, that `name` is optional using the old hardcoded JSON file syntax (not the modern `entity-manager` syntax). So, it could theoretically be empty, in an old configuration, and we should not consider this to be an error.",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1eb1af3b_a3b5674e",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 471,
      "author": {
        "id": 1001707
      },
      "writtenOn": "2023-05-11T01:57:20Z",
      "side": 1,
      "message": "are you talking about the same name of two pidloops?\nwe will check empty name string case two",
      "parentUuid": "8eb7bddb_a2d5f417",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1a00994e_7e8c5b09",
        "filename": "pid/zone.cpp",
        "patchSetId": 2
      },
      "lineNbr": 471,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2023-05-25T00:22:32Z",
      "side": 1,
      "message": "Thanks for adding the warning message in `buildjson.cpp` earlier. That should be sufficient.",
      "parentUuid": "1eb1af3b_a3b5674e",
      "revId": "8c33778dc744f63f40e82228ad8af839fc8ff621",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}